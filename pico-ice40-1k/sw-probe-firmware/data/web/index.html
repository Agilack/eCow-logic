<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
 <head>
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type"></meta>
  <meta content="utf-8" http-equiv="encoding"></meta>
  <link rel="stylesheet" href="/p/styl.css"></link>
  <script type="text/javascript">
  function layersel(num) {
    // Hide all content layers
    var tabs = document.getElementsByClassName("layer");
    for(var i = 0; i < tabs.length; i++) {
      tabs[i].classList.remove("focus");
    }
    // Clear selection on sidebar icons
    var icons = document.getElementsByClassName("menu");
    for(var i = 0; i < icons.length; i++) {
      icons[i].classList.remove("selected");
    }

    // Set focus on selected side icon
    var selico = document.getElementById("menu_" + num);
    selico.classList.add("selected");
    // Show the selected layer
    var e = document.getElementById("layer_" + num);
    e.classList.add("focus");
  };
  </script>
 </head>
 <body>
  <div id="topbar">
    <div class="title">eCow-logic</div>
  </div>
	<div id="sidebar">
		<div id="menu_1" class="menu selected">
			<a href="#" onclick="layersel(1); return false;">
			<img src="data:image/png;base64,
			iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAMAAADzN3VRAAAAvVBMVEVti5Nti5Nti5Nti5Nti5Nt
			i5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nt
			i5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nt
			i5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nt
			i5OatRt+AAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAACRSURBVCjPtdJJAoIwDEbhdxRQnMAB
			BVSm//7HMqWiAi5cSBZpm69NuyjMFYXOlo9SM4Ja0g1ONgxBKriqnoqUWk6t1VB20soU1tJALm6x
			tNLCHf6Qu1o4dLv30L6lUQm5fORQ2jued2dQqY8KMn9KSnzzV0DSURiMwFWDsO83IX6T2GbxV4ls
			Fs0q25Fs/v9fHvK5O42wDjalAAAAAElFTkSuQmCC" alt="[Home]" />
			</a>
		</div>
		<div id="menu_2" class="menu">
			<a href="#" onclick="layersel(2); return false;">
			<img src="data:image/png;base64,
			iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAMAAADzN3VRAAAA0lBMVEVti5Nti5Nti5Nti5Nti5Nt
			i5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nt
			i5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nt
			i5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nt
			i5Nti5Nti5Nti5Nti5Nti5Nti5Nti5MZX3jnAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAACc
			SURBVCjPnVFbEsIgDMxdFLU+axUVn7W697+SIco0ZZqPuh8MZAnsbogGwZkMJiYj1ML7atoWZ3vv
			LxAKgreUS7RwlHZMnBUBuTo+8K6hJa/Pgs/zREQ0kHc3SYGSU9MVuCdtuVT0ewjAzXJntJRRnd3y
			6FHwAmr+apupHu2+pqNf5VSlEbrp6JjWnUSzKaxO4fibgj25YdN29Cc+dJEwH/TL/wcAAAAASUVO
			RK5CYII=" alt="[Communication]" />
			</a>
		</div>
		<div id="menu_3" class="menu">
			<a href="#" onclick="layersel(3); return false;">
			<img src="data:image/png;base64,
			iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAMAAADzN3VRAAAA3lBMVEVti5Nti5Nti5Nti5Nti5Nt
			i5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nt
			i5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nt
			i5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nt
			i5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5Nti5PSbsEYAAAAAXRSTlMAQObYZgAAAAFi
			S0dEAIgFHUgAAACqSURBVCjPbZJbFoMgDESzH/suWlusYtFW9r8hFQxJGueD43BJGHMAyDJudAaU
			moBqxP41cF0IdEGqRdBG+47fJUepVW4wUUMJmI+pnowc1w2LR16wU5Ti9AAHbLoRsyWd7LL8iNyh
			Z/9xYt0cfAnwa8IInwzOHCwXV7Lkhq7MZ3gukVqJD1rUdNyAMo8dUqWcXhGPIxz+bh9ourUAtXgj
			VObVuyrWYdsi+xkfpWd6+bDPmwAAAABJRU5ErkJggg==" alt="[Help]" />
			</a>
		</div>
	</div>
	<div id="content">
    <div class="layer focus" id="layer_1">
    <div style="float:right">
      <img src="/p/ecow.png" alt="[logo]" />
    </div>
    <div class="panel">
      <div class="phead">Charger un bitstream</div>
      <div class="pbody">
        <form action="/pld" method="POST" enctype="multipart/form-data">
        <label>Fichier </label><input type="file" name="bit" accept="">
        <br/>
        <input type="submit" class="button" value="Envoyer"/>
        </form>
      </div>
    </div>
    </div> <!-- layer 1 -->
		<div class="layer" id="layer_2">
			<div class="panel">
				<div class="phead">Commande SPI</div>
				<div class="pbody">
					<input id="formSpiValue" type="text" name="cmd" size="40">
					<br/>
					<button id="formSpiButton" class="button">Envoyer</button>
				</div>
			</div>
			<div class="panel" id="spiDataPane" style="display: none">
				<div class="phead">Log des transactions</div>
				<div class="pbody">
					<pre id="spiDataLog"></pre>
				</div>
			</div>
		</div> <!-- layer 2 -->

		<div class="layer" id="layer_3">
			<p>Documentation bientot disponible</p>
		</div> <!-- layer 3 -->
	</div> <!-- content -->
  <script type="text/javascript">
  document.getElementById("formSpiButton").addEventListener("click", function () {
  	console.log("Form Spi Button");
  	var spival = document.getElementById('formSpiValue').value;
  	
  	document.getElementById("spiDataPane").style.display = "block";
  	var datalog = document.getElementById("spiDataLog");
  	datalog.innerHTML += "TX: " + spival + "\n";
  	
  	var args = "data=" + spival;
  	
  	var uri = '/spi';
  	
  	var xhr = new XMLHttpRequest();
  	xhr.open('post', uri, true);
  	xhr.onreadystatechange = function () {
  		if (xhr.readyState === 4) {
  			if(xhr.status == 200) {
	  			var result = "RX: " + xhr.response + "\n";
	  			datalog.innerHTML += result;
  			}
  		}
  	};
  	xhr.send(args);
  });
  </script>
 </body>
</html>